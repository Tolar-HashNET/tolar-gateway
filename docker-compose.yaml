version: "2.4"

services:
  thin_node:
    image: tolar-node
    build:
      context: thin_node
    container_name: tolar-node
    network_mode: host
    restart: on-failure:5
    mem_limit: 2g
    volumes:
    - keystore:/home/thin_node/.tolar/keystore/

  staging_node:
    image: staging-node
    build:
      context: staging_node
    container_name: staging-node
    network_mode: host
    restart: on-failure:5
    mem_limit: 2g
    volumes:
      - staging:/home/thin_node/.tolar/keystore/

  main_node:
    image: main-node
    build:
      context: main_node
    container_name: main-node
    network_mode: host
    restart: on-failure:5
    mem_limit: 2g
    volumes:
      - main:/home/thin_node/.tolar/keystore/

volumes:
  keystore:
  staging:
  main: